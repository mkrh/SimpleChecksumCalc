<!DOCTYPE html>
<html>

<head>
	<style>
		h1 {
			padding: 0.3em;
		}

		.centerVertically {
			position: relative;
			top: 50%;
			transform: translateY(-50%);
		}
	</style>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
	 crossorigin="anonymous">

	<script>
		const example_input = [61416, 464, 47856, 7874, 32165, 45687, 10021, 8985, 65501, 57458, 41234, 14549];

		function calc() {
			const i = document.getElementById('i');
			const o = document.getElementById('o');

			if (i) {
				o.value = sum(i.value.split(' '));
			}
		}

		function sum(arr) {
			let sum = 0;
			let overflow = 0;

			arr.forEach((e) => {
				e = e & 0xFFFF;

				sum += e;
				overflow = sum & 0x10000;
				sum = sum & 0xFFFF;

				while (overflow > 0) {
					sum += 1;
					overflow = sum & 0x10000;
					sum = sum & 0xFFFF;
				}
			});

			sum = ~sum;
			sum = sum & 0xFFFF;
			return sum;
		}
	</script>
</head>

<body>
	<h1>TCP Checksum Calculator</h1>
	<br>
	<div class="container">
		<div class="row">
			<div class="col-md-5">
				<textarea id="i" class="form-control" title="input" placeholder="Provide 16-bit integers separated by a single space here"></textarea>
			</div>
			<div class="col-md-2 text-center">
				<button id="btnCalc" class="btn centerVertically" onclick="calc()">Calc</button>
			</div>
			<div class="col-md-5">
				<input id="o" type="text" class="form-control centerVertically" readonly value="Your checksum will be displayed here." title="output">
			</div>
		</div>
	</div>
</body>

</html>